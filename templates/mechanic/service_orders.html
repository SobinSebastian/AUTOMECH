{% extends 'mechanic/base.html' %}
{% block conhead %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css" />
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>
{% endblock %}
{% block content %}
{% load static %}

<div class="row">
 <div id="calendar"></div>
</div>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>
{% comment %} <script>
document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');

    // Initialize FullCalendar
    var calendar = new FullCalendar.Calendar(calendarEl, {
        plugins: ['dayGrid'],
        defaultView: 'dayGridMonth',
        events: [
            // Fetch and format events from your Django backend
            {% for order in service_orders %}
                {
                    title: '{{ order.vehicle.vehicle_Regno }} - {{ order.service_center.place }}',
                    start: '{{ order.date }}T{{ order.time }}',
                    url: '{% url "your_detail_view_name" order.slug %}',
                    color: '{% if order.status == "completed" %}#28a745{% elif order.status == "cancelled" %}#dc3545{% else %}#007bff{% endif %}'
                },
            {% endfor %}
        ],
    });

    // Render the calendar
    calendar.render();
});
</script> {% endcomment %}
<script src="https://cdn.jsdelivr.net/npm/fullcalendar-scheduler@6.1.11/index.global.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    console.log('Before FullCalendar initialization');
    var calendarEl = document.getElementById('calendar');
    
    try {
       console.log('Before FullCalendar instantiation');
       var calendar = new FullCalendar.Calendar(calendarEl, {
          plugins: ['dayGrid'],
          events: [
             {
                title: 'Event 1',
                start: '2024-02-28T10:00:00',
             },
             // Additional events...
          ],
       });
 
       console.log('Before rendering calendar');
       calendar.render();
       console.log('After rendering calendar');
    } catch (error) {
       console.error('Error during FullCalendar initialization:', error);
    }
 });
 
</script>

{% endblock %}
