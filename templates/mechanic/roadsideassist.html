{% extends 'mechanic/base.html' %}
{%block content%}
{% load tz %}
{% load static %}
{% block conhead%}
  <!-- Bootstrap CSS -->

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">
  <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>
{% endblock %}
<div class="row">
  <div class="col-md-12 grid-margin stretch-card">
    <div class="card">
      <div class="card-body">
        <h3 class="card-title text-danger"> <u> RSA Requests </u></h3>
        <div class="alert alert-warning" role="alert">
          <b>Road Side Assistance Requests </b>  </div>
        
        {% if rsa_detials %}
        
      
     
      <div class="col-md-12 grid-margin stretch-card">
        <div class="card">
          <div class="card-body">
            <p class="card-title text-danger">Road Side Assistance Requests</p>
            <div class="table-responsive">
          <table id = "ItemsTablenew" class="display expandable-table dataTable no-footer w-100">
            <thead>
              <tr >
                <th scope="col">Vehicle</th>
                <th scope="col">Date & Time</th>
                <th scope="col">Status</th>
                <th scope="col">View</th>
              </tr>
            </thead>
            <tbody>
              {% for  rsa in rsa_detials %}
              <tr >
                <td>{{rsa.vehicle_info.vehicle_Regno}}</td>
                <td> {{order.date}}{{ rsa.created_at|time:"H:i A" }}</td>
                <td> 
                  {{ rsa.status}}
                </td>
                <td>
                  <a href="{% url 'mech_rsa_det'  slug=rsa.slug %}">View</a> 
                </td>
              </tr>
              
              {%endfor%}
            </tbody>
          </table>
           {% else  %} 
           <h3 class="text-danger"> No  Road Side Assistance Request is  Found</h3>
          {% endif %}
          <br>
          <br>
        {% if rsa_detials_completed%}
            <p class="card-title text-danger"><u>Completed Road Side Assistance Requests</u></p>
            <div class="table-responsive">
          <table  id = "ItemsTable" class="display expandable-table dataTable no-footer w-100">
            <thead>
              <tr >
                <th scope="col">Vehicle</th>
                <th scope="col">Date & Time</th>
                <th scope="col">Status</th>
                <th scope="col">View</th>
              </tr>
            </thead>
            <tbody>
              {% for  rsa in rsa_detials_completed %}
              <tr >
                <td>{{rsa.vehicle_info.vehicle_Regno}}</td>
                <td> {{order.date}}{{ rsa.created_at|time:"H:i A" }}</td>
                <td> 
                  {{ rsa.status}}
                </td>
                <td>
                  <a href="{% url 'mech_rsa_det'  slug=rsa.slug %}">View</a> 
                </td>
              </tr>
              
              {%endfor%}
            </tbody>
          </table>
          {% else %}
           <h3 class="text-danger"> No  Completed Road Side Assistance Request is  Found</h3>
          {% endif %}

          </div>
        </div>
      </div>     
</div>
<script src="https://cdn.datatables.net/1.11.6/js/jquery.dataTables.min.js"></script>
<script>
  $(document).ready(function() {
    $('#ItemsTable').DataTable();
  });
</script>
<script>
  $(document).ready(function() {
    $('#ItemsTablenew').DataTable();
  });
</script>
{%endblock%}